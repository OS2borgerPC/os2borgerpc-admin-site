{% extends 'system/wake_plan/wake_change_events/wake_change_event_base.html' %}
{% load crispy_forms_tags %}

{% block specific_content %}
  <div class="container-fluid main sublevelmain" id="wake-change-plan">
    <h2 class="divideheader">

          {% if selected_event.type == "ALTERED_HOURS" or "altered" in request.resolver_match.url_name %}
            Ændrede åbningstider:
          {% else %}
            Lukket:
          {% endif %}
      {{selected_event.name|default:"Ny undtagelse"}}
    </h2>

        <form method="post" accept-charset="utf-8">

        {% csrf_token %}

        <fieldset class="wake-change-event-form">

          <label>Navn</label><br/>
          {{form.name}}

          <table class="mt-4">
            <thead>
              <tr>
                <td class="pe-2"></td>
                <td>Fra</td>
                <td></td> <!-- Visual date/time separator -->
                <td>Til</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="pe-2">Dato</td>
                <td class="pe-2"> {{form.date_start}}</td>
                <td>—</td>
                <td class="ps-2"> {{form.date_end}}</td>
              </tr>

          {# The second case is for handling the form for creating new altered hours, which doesn't yet have a type #}
          {% if selected_event.type == "ALTERED_HOURS" or "altered" in request.resolver_match.url_name %}
              <tr>
                <td class="pe-2 pt-2">Tidspunkt</td>
                <td class="wake-change-event-time pt-2 pe-2"> {{form.time_start}}</td>
                <td>—</td>
                <td class="wake-change-event-time pt-2 ps-2"> {{form.time_end}}</td>
              </tr>
          {% endif %}
            </tbody>
          </table>

          {# Insert the wake change "type" based on the URL for Create or from the current value for Update #}
          {% if selected_event.type == "ALTERED_HOURS" or "altered" in request.resolver_match.url_name %}
            <input type="hidden" name="type" value="ALTERED_HOURS"/>
          {% else %}
            <input type="hidden" name="type" value="CLOSED"/>
          {% endif %}

        </fieldset>

        <fieldset class="mt-3">
          <input class="btn btn-primary me-3" type="submit" name="submit" value="Gem ændringer">
          <input class="btn btn-secondary me-3" type="reset" name="cancel" value="Annuller">
        </fieldset>

      </form>

  </div>

{% endblock %}
