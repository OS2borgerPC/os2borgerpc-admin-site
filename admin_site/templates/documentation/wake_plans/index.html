{% extends 'documentation/index.html' %}
{% load static %}

{% block admin_groups_active %}class="active"{% endblock %}

{% block specific_content %}
  <h1>Strømbesparende funktioner</h1>
  <p>
    De strømbesparende funktioner består af et dvale-script og tænd/sluk-tidsplaner.
    Disse funktioner kan kun anvendes af de kunder, som har tilkøbt sig adgang.
    Alle kunder, som var med til at finansiere funktionerne, har automatisk adgang.
    Andre kunder kan kontakte Magenta, hvis de er interesserede.
  </p>
  <p>
    Dvale-scriptet er kun beregnet til brug på OS2borgerPC, mens tænd/sluk-tidsplaner
    kan anvendes på både OS2borgerPC og OS2borgerPC Kiosk.
  </p>
  <p>
    Hvis det er første gang du besøger denne side, vil vi foreslå at starte med at læse vores
    <a href="{% url 'wake_plan_user_guide' %}" target="_blank">Brugerguide til strømsparefunktioner i OS2borgerPC</a>.
  </p>
  <h2>Dvale-script</h2>
  <p>
    Dvale-scriptet kan bruges til at indstille computere til at gå i dvale efter
    et antal minutters inaktivitet. Der vises en valgfri advarsel, inden computeren går i dvale.
    Scriptet tager fem argumenter: hvorvidt funktionen
    skal aktiveres, antal minutter med inaktivitet før advarslen vises,
    antal minutter med inaktivitet før maskinen går i dvale,
    teksten i advarslen og teksten på knappen i advarslen.
    Hvis de to sidste tekst-relaterede input ikke angives, benyttes standardtekster.
    Scriptet logger automatisk borgeren ud, inden maskinen går i dvale.
  </p>
  <p>
    Dvale-scriptet kan også sætte maskinen i dvale, hvis den står inaktiv på login-skærmen.
    Dette kræver dog, at scriptkørsel ved login er blevet slået til via
    scriptet <a href="{% url 'script_redirect_id' '1064' %}">Login - Slå scriptkørsel ved login til/fra</a>.
    Advarslen vises ikke på login-skærmen.
  </p>
  <p>
    Bemærk at USB-overvågning ikke kan være aktiv, mens en computer er i dvale.
  </p>
  <h2>Tænd/Sluk tidsplaner</h2>
  <p>
    En Tænd/Sluk tidsplan er et redskab til at planlægge og administrere
    tænd- og sluk-tidspunkter for computerne i en eller flere grupper.
  </p>
  <p>
    Brugen af Tænd/Sluk tidsplaner overflødiggør scriptsene
    <a href="{% url 'script_redirect_id' '12' %}">OS2BorgerPC - Luk ned dagligt</a> og
    <a href="{% url 'script_redirect_id' '422' %}">OS2BorgerPC - Luk ned og vågn op dagligt</a>.
  </p>
  <p>
    Når man klikker på Tænd/Sluk tidsplan i venstremenuen, vil man til højre for
    venstremenuen få vist en liste af tidsplaner for det site, man er under. Man
    kan klikke på navnet for den enkelte tidsplan for at redigere tidsplanen.
  </p>
  <p>
    Til højre vises redigeringsinterfacet for den valgte tidsplan. Hvis ikke der
    er oprettet nogen tidsplaner for det site, man er under, vises interfacet til
    oprettelse af tidsplaner.
  </p>
  <p>
    Som standard når man klikker sig ind på en tidsplan, vil man få vist
    tidsplanens indstillinger samt hvilke undtagelser og grupper, der er knyttet til tidsplanen.
    Her kan man ændre tidsplanens navn, status, dvaletilstand og indstillinger
    for den faste ugeplan, samt tilføje/fjerne grupper eller undtagelser
    fra tidsplanen. Ændringer foretaget på siden træder ikke i kraft, før man
    klikker på "Gem ændringer"-knappen i bunden af skærmbilledet.
  </p>
  <p>
    Hvis man trykker på "Opret lukkedag", "Opret ændrede åbningstider" eller "Rediger undtagelser"
    omdirigeres man til en ny side, hvor man kan oprette nye undtagelser
    og redigere eller slette eksisterende undtagelser. De to "Opret" knapper går direkte til
    et interface for den pågældende type undtagelse, mens "Rediger undtagelser" åbner
    redigeringssiden for den første undtagelse for det site, man er under.
  </p>
  <p>
    De forskellige redigeringsmuligheder beskrives nærmere under disse punkter:
    {% include 'documentation/wake_plans/__submenu__.html' %}
  </p>
  <p>
    Hvis man ønsker at oprette en ny tidsplan, skal man klikke på "tilføj ny
    tænd/sluk tidsplan" oven over listen med tidsplaner. Dette åbner et interface, hvor
    man skal udfylde navn for tidsplanen og har mulighed for at redigere i indstillingerne,
    tilføje undtagelser eller indmelde grupper. Når man klikker på
    gem, vil man blive viderestillet til redigeringssiden for den nyoprettede
    tidsplan, hvor man kan fortsætte med at ændre i indstillingerne, tilføje undtagelser eller indmelde grupper.
    Hvis tidsplanen er sat til "aktiv," vil den også tage effekt, når man klikker på gem.
  </p>
  <h3>Indstilling af BIOS/UEFI</h3>
  <ol>
    <li>
      Hvis BIOS er indstillet til at vågne op på et bestemt tidspunkt, når Tænd/Sluk Tidsplaner aktiveres, så vil maskinen
      ikke følge de opstartstidspunkter i tidsplanen, men i stedet de tidspunkter, der står i BIOS. Den vil dog stadig
      følge nedlukningstidspunkterne sat i tidsplanen.
      Skal maskinen følge opstartstidspunkterne i tidsplanen, skal man ind i BIOS på maskinerne og slå dens styring af opstartstidspunkt
      fra. Modificering af BIOS er generelt ikke muligt at gøre fra styresystemet, så derfor kan vi heller ikke gøre det via
      scripts.
    </li>
    <li>
      Hvis maskinerne mister strømmen efter opvågningstidspunktet sat i tidsplanen, vil den vågne op ifølge
      tidsplanen. (Dvs. teknisk set så længe der stadig er strøm på CMOS-batteriet.)
      Men hvis den mister strømmen inden dét, så vil den ikke vågne op af sig selv.

      Nogle BIOS'er har muligheden for at indstille, at maskinen gendanner dens seneste tilstand (eller tænder) bagefter,
      hvis den mistede strømmen. Det vil vi derfor anbefale at slå til.

      Afhængigt af BIOS-version kan det se forskelligt ud, men her er et eksempel fra en NUC:
      Fra oversigtssiden vælger du "Advanced" og dernæst "Power":
      admin_site/static/
      <img src="{% static 'docs/img/wake_plan/nuc_bios_start_page.jpg' %}" alt="">
      Dernæst går du så ind og redigerer indstillingen "After Power Failure" og sætter denne til "Last State"
      (anbefalet) eller "Power On".
      <img src="{% static 'docs/img/wake_plan/nuc_bios_wake_up_power_failure_setting.jpg' %}" alt="">
    </li>
  </ol>
  <h3>Ofte stillede spørgsmål</h3>
  <h4>1. Hvad sker der, hvis maskinen mister strøm?</h4>
  <p>Se punkt 2. under "Indstilling af BIOS/UEFI" længere oppe.</p>
  <h4>2. Maskinen starter og lukker på de forkerte tidspunkter?</h4>
  <p>Dette kan skyldes, at tiden på maskinen er indstillet forkert, eksempelvis fordi den ikke har mulighed for at
    tidssynkronisere. Normalt tidssynkroniserer Ubuntu Linux - og flere andre styresystemer - via protokollen NTP (Network
    Time Protocol).
    NTP kører på port 123 over UDP, som vi derfor foreslår at åbne for i jeres netværksopsætning.
    Hvis i ikke ønsker at åbne for trafikken på alle domæner, ville vi kunne se på at udvikle et script der låser NTP
    til kun at tjekke bestemte URL'er.
  </p>
  <h4>3. Maskinen starter på de forkerte tidspunkter, men lukker planmæssigt?</h4>
  <p>Dette kan skyldes indstillingerne sat i BIOS. Se punkt 1. under "Indstilling af BIOS/UEFI" længere oppe".</p>
{% endblock %}
